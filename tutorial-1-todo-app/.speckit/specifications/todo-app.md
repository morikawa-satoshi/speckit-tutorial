# ToDoアプリ 機能仕様 (Specification)

## 概要
ブラウザのみで動作するシンプルなToDoリストアプリ。データはローカルストレージに保存し、追加・完了/未完了切替・削除・表示・フィルタを提供する。

## ユーザーストーリー

### US-1: ToDoアイテムを追加する
**として** ユーザー
**私は** 新しいタスクを追加したい
**なぜなら** やるべきことを記録したいから

**受け入れ基準**
- 入力欄にテキストを入力し、Enterまたは「追加」ボタンで登録できる
- 空・空白のみの入力は拒否する
- 追加後、リストに即時反映され、入力欄はクリアされる
- データは `localStorage` に保存される

### US-2: 完了/未完了を切り替える
**として** ユーザー
**私は** タスクを完了済みにマーク/解除したい
**なぜなら** 進捗を把握したいから

**受け入れ基準**
- チェックボックスまたは行クリックで完了/未完了をトグルできる
- 完了タスクは視覚的に区別（取り消し線や色）される
- 状態はリロード後も保持される

### US-3: タスクを削除する
**として** ユーザー
**私は** 不要なタスクを削除したい
**なぜなら** リストを整理したいから

**受け入れ基準**
- 各タスクに削除ボタン（Xなど）がある
- クリックで即時削除され、`localStorage` も更新される
- 確認ダイアログは不要（シンプルさ優先）

### US-4: タスクを表示・フィルタする
**として** ユーザー
**私は** すべて/未完了/完了済みのタスクを見たい
**なぜなら** 状態に応じて集中したいから

**受け入れ基準**
- 初期表示は「すべて」
- フィルタは「すべて / 未完了 / 完了済み」を切替でき、選択中が分かる
- フィルタ変更は即時反映される
- （任意）フィルタ状態は永続化しなくてよい

## 機能要件

### モデル
- `id`: 一意ID（タイムスタンプなど）
- `text`: タスク本文（最大200文字、トリム必須）
- `completed`: 真偽値
- `createdAt`: 作成日時

### データ永続化
- 保存先: `localStorage`（キー: `todo-app-tasks`）
- 追加/更新/削除のたびに即時保存
- ページロード時に読み込み、パース失敗時は空配列に初期化

### UI要素
- 入力欄 + 追加ボタン（Enterでも追加）
- タスクリスト（スクロール可）
  - 完了トグル操作部位
  - タスク本文
  - 削除ボタン
- フィルタバー（すべて/未完了/完了済み）
- 未完了タスク数の表示

### バリデーション / フィードバック
- 空/空白のみは追加不可、200文字を超える入力は拒否
- エラー時は簡潔なメッセージ表示（短時間で消えるなど）

## 非機能要件
- パフォーマンス: 100件程度でストレスなく操作、操作は体感即時
- アクセシビリティ: キーボード操作対応、適切なラベル/コントラスト
- レスポンシブ: スマホ〜デスクトップでレイアウトが崩れない

## エッジケース
- LocalStorageが使えない場合: 警告表示し、非永続モードで動作
- 破損データ: パースエラー時は空配列で再初期化
- 長文入力: 200文字上限で制御、表示は折返しまたは省略

## 成功基準
- 追加/完了トグル/削除/フィルタが仕様通り動作
- リロード後もデータが保持される
- キーボードだけで主要操作が可能
